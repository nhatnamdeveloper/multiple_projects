<?xml version="1.0" encoding="UTF-8"?>
<svg width="1000" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .node { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; rx: 8; ry: 8; }
      .input { fill: #c8e6c9; stroke: #388e3c; stroke-width: 2; }
      .output { fill: #ffcdd2; stroke: #d32f2f; stroke-width: 2; }
      .generator { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; }
      .discriminator { fill: #f3e5f5; stroke: #7b1fa2; stroke-width: 2; }
      .loss { fill: #e8f5e8; stroke: #388e3c; stroke-width: 2; }
      .subgraph { fill: #f5f5f5; stroke: #9e9e9e; stroke-width: 1; stroke-dasharray: 5,5; }
      .text { font-family: Arial, sans-serif; font-size: 12px; fill: #2c3e50; text-anchor: middle; }
      .title { font-size: 14px; font-weight: bold; fill: #2c3e50; text-anchor: middle; }
      .line { stroke: #7f8c8d; stroke-width: 2; fill: none; }
      .arrow { marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7f8c8d" />
    </marker>
  </defs>
  
  <!-- Main Flow -->
  <rect x="50" y="100" width="100" height="50" class="node input"/>
  <text x="100" y="125" class="text">Input Image</text>
  
  <rect x="200" y="100" width="100" height="50" class="node"/>
  <text x="250" y="125" class="text">Preprocessing</text>
  
  <rect x="350" y="100" width="100" height="50" class="node generator"/>
  <text x="400" y="125" class="text">ESRGAN Generator</text>
  
  <rect x="500" y="100" width="100" height="50" class="node"/>
  <text x="550" y="125" class="text">Upsampling x4</text>
  
  <rect x="650" y="100" width="100" height="50" class="node"/>
  <text x="700" y="125" class="text">Post-processing</text>
  
  <rect x="800" y="100" width="100" height="50" class="node output"/>
  <text x="850" y="125" class="text">High-Resolution Output</text>
  
  <!-- Training Data Flow -->
  <rect x="50" y="250" width="100" height="50" class="node"/>
  <text x="100" y="275" class="text">Training Data</text>
  
  <rect x="200" y="250" width="100" height="50" class="node discriminator"/>
  <text x="250" y="275" class="text">Discriminator</text>
  
  <rect x="350" y="250" width="100" height="50" class="node loss"/>
  <text x="400" y="275" class="text">Adversarial Loss</text>
  
  <!-- Loss Functions -->
  <rect x="500" y="250" width="100" height="50" class="node loss"/>
  <text x="550" y="275" class="text">Perceptual Loss</text>
  
  <rect x="650" y="250" width="100" height="50" class="node loss"/>
  <text x="700" y="275" class="text">L1 Loss</text>
  
  <!-- Generator Architecture Subgraph -->
  <rect x="300" y="350" width="200" height="120" class="subgraph"/>
  <text x="400" y="370" class="title">Generator Architecture</text>
  
  <rect x="320" y="380" width="80" height="40" class="node"/>
  <text x="360" y="400" class="text">Conv2d</text>
  
  <rect x="420" y="380" width="80" height="40" class="node"/>
  <text x="460" y="400" class="text">Residual Block</text>
  
  <rect x="320" y="430" width="80" height="40" class="node"/>
  <text x="360" y="450" class="text">Pixel Shuffle</text>
  
  <rect x="420" y="430" width="80" height="40" class="node"/>
  <text x="460" y="450" class="text">Upsampling</text>
  
  <!-- Loss Functions Subgraph -->
  <rect x="500" y="350" width="200" height="120" class="subgraph"/>
  <text x="600" y="370" class="title">Loss Functions</text>
  
  <rect x="520" y="380" width="80" height="40" class="node loss"/>
  <text x="560" y="400" class="text">Content Loss</text>
  
  <rect x="620" y="380" width="80" height="40" class="node loss"/>
  <text x="660" y="400" class="text">Adversarial Loss</text>
  
  <rect x="520" y="430" width="80" height="40" class="node loss"/>
  <text x="560" y="450" class="text">Perceptual Loss</text>
  
  <!-- Connections -->
  <!-- Main flow -->
  <line x1="150" y1="125" x2="200" y2="125" class="line arrow"/>
  <line x1="300" y1="125" x2="350" y2="125" class="line arrow"/>
  <line x1="450" y1="125" x2="500" y2="125" class="line arrow"/>
  <line x1="600" y1="125" x2="650" y2="125" class="line arrow"/>
  <line x1="750" y1="125" x2="800" y2="125" class="line arrow"/>
  
  <!-- Training data flow -->
  <line x1="150" y1="275" x2="200" y2="275" class="line arrow"/>
  <line x1="300" y1="275" x2="350" y2="275" class="line arrow"/>
  <line x1="400" y1="275" x2="400" y2="150" class="line arrow"/>
  
  <!-- Loss connections -->
  <line x1="550" y1="275" x2="400" y2="150" class="line arrow"/>
  <line x1="700" y1="275" x2="400" y2="150" class="line arrow"/>
  
  <!-- Generator architecture connections -->
  <line x1="360" y1="400" x2="420" y2="400" class="line arrow"/>
  <line x1="460" y1="420" x2="360" y2="430" class="line arrow"/>
  <line x1="400" y1="430" x2="420" y2="430" class="line arrow"/>
  
  <!-- Loss functions connections -->
  <line x1="560" y1="400" x2="620" y2="400" class="line arrow"/>
  <line x1="660" y1="420" x2="560" y2="430" class="line arrow"/>
  <line x1="600" y1="430" x2="620" y2="430" class="line arrow"/>
  
  <!-- Additional connections for clarity -->
  <line x1="400" y1="150" x2="400" y2="100" class="line" stroke-dasharray="5,5"/>
</svg>